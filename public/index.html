<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#000000">
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">
    <link rel="stylesheet" href="sidebar.css">
    <style type="text/css">
        #map {
            height: 100%;
        }

        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: sans-serif;
        }

    </style>
    <script src="sidebar.js"></script>
    <script defer src="/__/firebase/4.11.0/firebase-app.js"></script>
    <script defer src="/__/firebase/4.11.0/firebase-auth.js"></script>
    <script defer src="/__/firebase/4.11.0/firebase-database.js"></script>
    <script defer src="/__/firebase/4.11.0/firebase-messaging.js"></script>
    <script defer src="/__/firebase/4.11.0/firebase-storage.js"></script>
    <script defer src="/__/firebase/init.js"></script>
</head>

<body>
    <noscript>
    You need to enable JavaScript to run this app.
</noscript>
    <div id="root"></div>
    <div id="map"></div>
    <div id="sidebar" class="sidebar">
        <a id="toggle_sidebar" href="#">
            <svg id="open_sidebar" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
                <path d="M6 36h12v-4h-12v4zm0-24v4h36v-4h-36zm0 14h24v-4h-24v4z"></path>
                <path d="M0 0h48v48h-48z" fill="none"></path>
            </svg>
            <svg id="close_sidebar" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
                <path d="M14 14 L34,34 z" stroke="white" stroke-width="3" fill="none" />
                <path d="M34 14 L14,34 z" stroke="white" stroke-width="3" fill="none" />
            </svg>
        </a>
        <dl>
            <dt>Match Breakdown</dt>
            <dd class="stacked-bar-graph">
                <span class="text">Back Bay</span>
                <span style="width:15%"></span>
                <span style="width:20%" class="bar outdoors"></span>
                <span style="width:15%" class="bar nightlife"></span>
                <span style="width:22%" class="bar restaurants"></span>
                <span style="width:4%" class="bar safety"></span>
            </dd>
            <dd class="stacked-bar-graph"><span class="text">Allston</span>
                <span style="width:15%"></span>
                <span style="width:17%" class="bar outdoors"></span>
                <span style="width:10%" class="bar nightlife"></span>
                <span style="width:10%" class="bar restaurants"></span>
                <span style="width:17%" class="bar safety"></span>
            </dd>
            <dd class="stacked-bar-graph">
                <span class="text">Fenway</span>
                <span style="width:15%"></span>
                <span style="width:12%" class="bar outdoors"></span>
                <span style="width:12%" class="bar nightlife"></span>
                <span style="width:14%" class="bar restaurants"></span>
                <span style="width:10%" class="bar safety"></span>
            </dd>
            <dd class="stacked-bar-graph">
                <span class="text">Downtown</span>
                <span style="width:15%"></span>
                <span style="width:2%" class="bar outdoors"></span>
                <span style="width:5%" class="bar nightlife"></span>
                <span style="width:17%" class="bar restaurants"></span>
                <span style="width:8%" class="bar safety"></span>
            </dd>
            <dd class="stacked-bar-graph">
                <span class="text">East Boston</span>
                <span style="width:15%"></span>
                <span style="width:2%" class="bar outdoors"></span>
                <span style="width:5%" class="bar nightlife"></span>
                <span style="width:10%" class="bar restaurants"></span>
                <span style="width:2%" class="bar safety"></span>
            </dd>
        </dl>
    </div>
    <script>
        // initialize sidebar javascript
        window.onload = init_sidebar(window, document);

    </script>
    <script>
        var points = [];
        var map;

        var boston_center = {
            lat: 42.351,
            lng: -71.076
        };

        var colors = {
            best: "#709053",
            better: "#81ae64",
            good: "#c7e78b",
            fair: "#fff4c9"
        };

        document.addEventListener('DOMContentLoaded', function() {
            console.log("test")
            firebase.database().ref('region/Downtown/').on('value', function(snapshot) {
                console.log("RESPONSE: " + snapshot.val())
                points = snapshot.val()
                new google.maps.Polygon({
                    map: map,
                    paths: points,
                    strokeColor: '#757575',
                    strokeOpacity: 0.8,
                    strokeWeight: 2,
                    fillColor: colors.best,
                    fillOpacity: 0.8,
                    draggable: false,
                    geodesic: true
                });
            });

            var c = [{
                    "lat": 42.361295952726586,
                    "lng": -71.05341835721063
                },
                {
                    "lat": 42.344863910441305,
                    "lng": -71.05949924146289
                },
                {
                    "lat": 42.349533426640555,
                    "lng": -71.057062032957
                },
                {
                    "lat": 42.35653726729268,
                    "lng": -71.06202649611477
                }
            ]
            // Construct a draggable red triangle with geodesic set to true.

        });

        /**
         * The CenterControl adds a control to the map that recenters the map on
         * Chicago.
         * This constructor takes the control DIV as an argument.
         * @constructor
         */
        function CenterControl(controlDiv, map) {

            // Set CSS for the control border.
            var controlUI = document.createElement('div');
            controlUI.style.backgroundColor = '#fff';
            controlUI.style.border = '2px solid #fff';
            controlUI.style.borderRadius = '3px';
            controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
            controlUI.style.cursor = 'pointer';
            controlUI.style.marginBottom = '22px';
            controlUI.style.textAlign = 'center';
            controlUI.title = 'Click to recenter the map';
            controlDiv.appendChild(controlUI);

            // Set CSS for the control interior.
            var controlText = document.createElement('div');
            controlText.style.color = 'rgb(25,25,25)';
            controlText.style.fontFamily = 'Roboto,Arial,sans-serif';
            controlText.style.fontSize = '16px';
            controlText.style.lineHeight = '38px';
            controlText.style.paddingLeft = '5px';
            controlText.style.paddingRight = '5px';
            controlText.innerHTML = 'Center Map';
            controlUI.appendChild(controlText);

            // Setup the click event listeners: simply set the map to Chicago.
            controlUI.addEventListener('click', function() {
                map.setCenter(boston_center);
            });

        }

        function initMap() {
            // Create a map object and specify the DOM element for display.
            map = new google.maps.Map(document.getElementById('map'), {
                center: {
                    lat: 42.351,
                    lng: -71.076
                },
                zoom: 14,
                draggable: true,
                mapTypeControl: true,
                disableDefaultUI: false

            });

            var centerControlDiv = document.createElement('div');
            var centerControl = new CenterControl(centerControlDiv, map);

            centerControlDiv.index = 1;
            map.controls[google.maps.ControlPosition.TOP_CENTER].push(centerControlDiv);

            var colors2 = {
                best: "#0278ae",
                better: "#51adcf",
                good: "#a5ecd7",
                fair: "#e8ffc1"
            };


            var map_style = [{
                    elementType: 'geometry',
                    stylers: [{
                        color: '#f5f5f5'
                    }]
                },
                {
                    elementType: 'labels.icon',
                    stylers: [{
                        visibility: 'off'
                    }]
                },
                {
                    elementType: 'labels.text.fill',
                    stylers: [{
                        color: '#bababa'
                    }]
                },
                {
                    elementType: 'labels.text.stroke',
                    stylers: [{
                        color: '#f5f5f5'
                    }]
                },
                {
                    featureType: 'administrative.land_parcel',
                    elementType: 'labels.text.fill',
                    stylers: [{
                        color: '#bdbdbd'
                    }]
                },
                {
                    featureType: 'poi',
                    elementType: 'geometry',
                    stylers: [{
                        color: '#eeeeee'
                    }]
                },
                {
                    featureType: 'poi',
                    elementType: 'labels.text.fill',
                    stylers: [{
                        color: '#757575'
                    }]
                },
                {
                    featureType: 'poi.park',
                    elementType: 'geometry',
                    stylers: [{
                        color: '#e5e5e5'
                    }]
                },
                {
                    featureType: 'poi.park',
                    elementType: 'labels.text.fill',
                    stylers: [{
                        color: '#9e9e9e'
                    }]
                },
                {
                    featureType: 'road',
                    elementType: 'geometry',
                    stylers: [{
                        color: '#ffffff'
                    }]
                },
                {
                    featureType: 'road.arterial',
                    elementType: 'labels.text.fill',
                    stylers: [{
                        color: '#757575'
                    }]
                },
                {
                    featureType: 'road.highway',
                    elementType: 'geometry',
                    stylers: [{
                        color: '#dadada'
                    }]
                },
                {
                    featureType: 'road.highway',
                    elementType: 'labels.text.fill',
                    stylers: [{
                        color: '#616161'
                    }]
                },
                {
                    featureType: 'road.local',
                    elementType: 'labels.text.fill',
                    stylers: [{
                        color: '#9e9e9e'
                    }]
                },
                {
                    featureType: 'transit.line',
                    elementType: 'geometry',
                    stylers: [{
                        color: '#e5e5e5'
                    }]
                },
                {
                    featureType: 'transit.station',
                    elementType: 'geometry',
                    stylers: [{
                        color: '#eeeeee'
                    }]
                },
                {
                    featureType: 'water',
                    elementType: 'geometry',
                    stylers: [{
                        color: '#5a5a5a'
                    }]
                },
                {
                    featureType: 'water',
                    elementType: 'labels.text.fill',
                    stylers: [{
                        color: '#9e9e9e'
                    }]
                }
            ];

            map.setOptions({
                styles: map_style
            });

        }

    </script>

    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDS1savblfbc5FULYqAF6AZjKBKWrlRhl4
        &libraries=visualization&callback=initMap">


    </script>
</body>

</html>
